%数字音乐的生成
function [M, L]=digit_music_gene(music_name, tone_choose)
Z=2^(1/12);     %基本音频率
tA=220; tB=tA*Z^2; tC=tA*Z^3; tD=tA*Z^5; tE=tA*Z^7; tF=tA*Z^8; tG=tA*Z^10;
tones=[tA tB tC tD tE tF tG];
tone = tones(tone_choose);%演奏的调号
do=tone; lai=tone*Z^2; mi=tone*Z^4; fa=tone*Z^5;    %演奏的音节
so=tone*Z^7; la=tone*Z^9; xi=tone*Z^11;

if strcmp(music_name, '少年锦时') == 1
        M=[do so/2 mi do lai la/2 fa la/2 so/2 do mi lai do so/2 mi do ...
           do so/2 mi do lai la/2 fa la/2 so/2 do mi lai do so/2 mi do ...
           do so/2 mi do lai la/2 fa la/2 so/2 do mi lai do so/2 mi do ...
           0 do do do do do do la/2 lai 0 lai lai lai lai do do la/2 do ...
           0 so/2 la/2 do mi lai do la/2 lai 0 lai lai lai lai do la/2 lai do ...
           0 do la/2 do la/2 do lai lai 0 lai mi la so la lai mi ...
           0 so so so so mi lai do lai la/2 lai do la/2 lai 0 lai lai mi lai la/2 lai do 0 0 ...
           0 do do do do la so la 0 la do*2 do*2 xi la so mi lai do lai mi ...
           mi mi mi la so mi lai do lai la so mi lai do lai so/2 la so la lai lai mi mi ...
           0 do do do lai do so la la 0 la la la la so so mi so lai do so mi ...
           mi la so mi lai do lai la so mi so mi mi lai lai lai do la/2 do do ...
           0 lai*2 mi*2 so*2 la*2 so*2 mi*2 do*2 lai*2 0 la*2 la*2 la*2 so*2 la*2 so*2 do*2 lai*2 mi*2 ...
           0 do*4 la*2 so*2 mi*2 lai*2 mi*2 mi*2 lai*2 lai*2 do*2 lai*2 mi*2 so*2 mi*2 lai*2 do*2 lai*2 mi*2 mi*2 lai*2 lai*2 do*2 do*2 ...
           0 do la/2 do la/2 do lai lai 0 lai mi la so la lai mi ...
           0 so so so mi lai do lai la/2 lai do la/2 lai 0 lai lai lai mi lai la/2 lai do 0 0 ...
           0 do do do do la do*2 la 0 la do*2 do*2 xi la so mi lai do lai so ...
           so mi mi la so mi lai do lai la so mi lai do lai so/2 la so la la la mi mi ...
           0 do do do lai do so la la 0 la la la la so so mi so lai do lai so ...
           so mi mi la so mi lai do lai 0 so/2 la so mi so mi lai so/2 lai lai mi mi lai do la/2 do do ...
           do 0 so/2 so/2 mi mi mi lai mi 0 0 so/2 mi lai mi fa mi lai lai 0 ...
           0 0 do lai do lai mi lai 0 do do do do la so la ...
           0 la do*2 do*2 xi la so mi lai do lai mi mi mi mi la so mi lai do lai la so mi lai do ...
           lai so/2 la so la lai lai mi mi 0 do do do lai do so la la ...
           0 la la la la so so mi so lai do so mi mi la so mi lai do lai la so mi so mi ...
           mi lai lai lai do la/2 do do 0 0 lai do la/2 do do ...
           0 0 lai do la/2 do do 0 0 lai do la/2 do do];   %演奏的内容，乐谱

        L=[1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ...
           1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ...
           1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ...
           0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 4 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.25 0.25 ...
           0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 4 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 4 ...
           0.5 1 0.5 0.5 0.5 0.5 0.5 4 0.5 1 0.5 0.5 0.5 0.5 0.5 4 ...
           0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1.5 0.5 0.5 0.5 0.5 0.5 0.5 1 0.5 0.5 0.5 0.5 0.5 2 1 1 ...
           0.5 1 0.5 0.5 0.5 0.5 0.5 4 0.5 1 0.5 0.5 0.5 0.5 0.5 1.5 0.5 1 0.5 0.5 ...
           0.5 0.5 1 0.5 0.5 0.25 0.25 0.5 2 0.5 0.5 0.5 0.25 0.25 1.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 3 ...
           0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 4 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1.5 0.5 0.5 1 0.5 ...
           2 0.5 0.5 0.25 0.25 0.5 2 0.5 0.5 0.5 0.25 0.25 0.5 0.5 1 0.5 0.5 0.5 0.5 4 ...
           0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 4 0.5 0.25 0.25 0.5 0.5 0.5 0.5 0.5 0.5 4 ...
           0.5 1 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 3 ...
           0.5 1 0.5 0.5 0.5 0.5 0.5 4 0.5 1 0.5 0.5 0.5 0.5 0.5 4 ...
           0.5 1 0.5 0.5 0.5 0.5 0.5 1.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 2 1 1 ...
           0.5 1 0.5 0.5 0.5 0.5 0.5 4 0.5 1 0.5 0.5 0.5 0.5 0.5 1.5 0.5 1 0.5 0.5 ...
           0.5 0.5 1 0.5 0.5 0.25 0.25 0.5 2 0.5 0.5 0.25 0.25 0.5 1.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 3 ...
           0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 4 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1.5 0.5 0.5 1 0.5 ...
           0.5 0.5 1 0.5 0.5  0.25 0.25 0.5 1 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1 0.5 0.5 1 0.5 0.5 0.5 0.5 1 0.5 1 ...
           1 0.5 0.25 0.25 0.5 0.5 0.5 0.5 4 1 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 2 1 ...
           1 0.5 0.5 0.5 0.5 0.5 0.5 4 0.5 1 0.5 0.5 0.5 0.5 0.5 4 ...
           0.5 1 0.5 0.5 0.5 0.5 0.5 1.5 0.5 1 0.5 0.5 0.5 0.5 1 0.5 0.5 0.25 0.25 0.5 2 0.5 0.5 0.5 0.25 0.25 ...
           1.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 3 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 4 ...
           0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1.5 0.5 0.5 1 0.5 2 0.5 0.5 0.25 0.25 0.5 2 0.5 0.5 0.5 0.25 0.25 ...
           0.5 0.5 1 0.5 0.5 0.5 0.5 4 1 1 0.5 0.5 0.5 0.5 4 ...
           1 1 0.5 0.5 0.5 0.5 4 1 1 0.5 0.5 0.5 0.5 4];      %演奏的内容，节奏
       l=60/96; L=L*l;
elseif strcmp(music_name, '起风了') == 1
    M=[xi/2 do lai mi mi/2 so mi lai/2 so/2 lai xi/2 do lai mi lai/2 so mi lai mi do lai  xi/2 do so/2 ...
        xi/2 do lai mi mi/2 so mi lai/2 so/2 lai xi/2 do lai mi lai/2 so mi lai mi do lai xi/2 do so/2 ...
        xi/2 do lai mi mi/2 so mi lai/2 so/2 lai xi/2 do lai mi do/2 so mi lai mi do lai  xi/2 do so/2 ...
        xi/2 do lai mi mi/2 so mi lai/2 so/2 lai lai do ...
        lai do lai do lai mi so mi lai lai do lai do lai mi lai do so/2 lai do lai do lai mi so mi lai ...
        lai mi lai do lai lai lai do lai do lai mi so mi lai lai mi lai do la/2 la/2 mi lai do lai ...
        do mi lai do lai do so mi lai do lai do do lai mi do la so la la do xi la xi xi ...
        xi la xi xi mi do*2 lai*2 do*2 xi la so la so la la so la so la so lai lai so mi mi do lai mi do ...
        la so la la do xi la xi xi xi la xi xi mi do*2 lai*2 do*2 xi la so la mi*2 mi*2 mi*2 so la mi*2 mi*2 mi*2 so la ...
        la do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 ...
        lai*2 do*2 la la do*2 do*2 lai*2 do*2 la la do*2 mi*2 mi*2 fa*2 mi*2 lai*2 mi*2 lai*2 do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 ...
        mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 lai*2 do*2 la la mi*2 lai*2 do*2 la la do*2 do*2 la mi*2 ...
        lai*2 do*2 la la mi*2 lai*2 lai*2 do*2 la la do*2 do*2 ...
         lai do lai do lai mi so mi lai lai do lai do lai mi lai do so/2 lai do lai do lai mi so mi lai ...
        lai mi lai do lai lai lai do lai do lai mi so mi lai lai mi lai do la/2 la/2 mi lai do lai ...
        do mi lai do lai do so mi lai do lai do do lai mi do la so la la do xi la xi xi ...
        xi la xi xi mi do*2 lai*2 do*2 xi la so la so la la so la so la so lai lai so mi mi do lai mi do ...
        la so la la do xi la xi xi xi la xi xi mi do*2 lai*2 do*2 xi la so la mi*2 mi*2 mi*2 so la mi*2 mi*2 mi*2 so la ...
        la do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 ...
        lai*2 do*2 la la do*2 do*2 lai*2 do*2 la la do*2 mi*2 mi*2 fa*2 mi*2 lai*2 mi*2 lai*2 do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 ...
        mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 lai*2 do*2 la la mi*2 lai*2 do*2 la la do*2 do*2 ...
        do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 ...
        lai*2 do*2 la la do*2 do*2 lai*2 do*2 la la do*2 mi*2 mi*2 fa*2 mi*2 lai*2 mi*2 lai*2 do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 ...
        mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 lai*2 do*2 la la mi*2 lai*2 do*2 la la do*2 do*2 ...
        do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 lai*2 mi*2 ...
        lai*2 do*2 la la do*2 do*2 lai*2 do*2 la la do*2 mi*2 mi*2 fa*2 mi*2 lai*2 mi*2 lai*2 do*2 lai*2 mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 ...
        mi*2 la*2 so*2 so*2 la*2 so*2 so*2 la*2 so*2 so*2 mi*2 lai*2 do*2 la la mi*2 lai*2 do*2 la la do*2 do*2 la mi*2 ...
        lai*2 do*2 la la mi*2 lai*2 lai*2 do*2 la la do*2 do*2];   %演奏的内容，乐谱
    L=[0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.5 1 0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.5 ...
        0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.5 1 0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.25 0.25 0.25 0.25 0.24 0.25 0.5 ...
        0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.5 1 0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.5 ...
        0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.5 1 2 2 ...
        0.75 0.25 0.75 0.25 0.5 0.5 0.5 0.25 0.25 0.75 0.25 0.75 0.25 0.25 0.25 0.25 0.25 1 0.75 0.25 0.75 0.25 0.5 0.5 0.5 0.25 0.25 ...
        0.75 0.25  0.5 0.25 0.25 2 0.75 0.25 0.75 0.25 0.5 0.5 0.5 0.25 0.25 0.75 0.25 0.5 0.25 0.25 1 0.25 0.25 0.25 0.25 ...
        1 0.25 0.25 0.25 0.25 0.75 0.25 0.25 0.25 0.25 0.25 2 0.5 0.5 0.5 0.5 0.5 0.25 0.25 0.75 0.25 0.5 0.25 0.25 1 ...
        0.5 0.25 0.25 0.75 0.25 0.25 0.25 0.25 0.25 0.5 0.5 0.5 0.25 0.25 0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 2 0.5 0.5 0.5 0.5 ...
        0.5 0.25 0.25 0.75 0.25 0.5 0.25 0.25 1 0.5 0.25 0.25 0.75 0.25 0.25 0.25 0.25 0.25 0.5 0.5 0.5 0.25 0.25 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 ...
        3 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25  0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.25 0.5 0.25 0.75 1 0.25 0.25 0.25 0.25 0.25 0.75 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.5 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.75 0.5 0.25 0.25 0.25 0.75 0.25 0.25 0.5 0.25 0.75 3 0.25 0.75 ...
        0.5 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.5 0.5 4 ...
        0.75 0.25 0.75 0.25 0.5 0.5 0.5 0.25 0.25 0.75 0.25 0.75 0.25 0.25 0.25 0.25 0.25 1 0.75 0.25 0.75 0.25 0.5 0.5 0.5 0.25 0.25 ...
        0.75 0.25  0.5 0.25 0.25 2 0.75 0.25 0.75 0.25 0.5 0.5 0.5 0.25 0.25 0.75 0.25 0.5 0.25 0.25 1 0.25 0.25 0.25 0.25 ...
        1 0.25 0.25 0.25 0.25 0.75 0.25 0.25 0.25 0.25 0.25 2 0.5 0.5 0.5 0.5 0.5 0.25 0.25 0.75 0.25 0.5 0.25 0.25 1 ...
        0.5 0.25 0.25 0.75 0.25 0.25 0.25 0.25 0.25 0.5 0.5 0.5 0.25 0.25 0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 2 0.5 0.5 0.5 0.5 ...
        0.5 0.25 0.25 0.75 0.25 0.5 0.25 0.25 1 0.5 0.25 0.25 0.75 0.25 0.25 0.25 0.25 0.25 0.5 0.5 0.5 0.25 0.25 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 ...
        3 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25  0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.25 0.5 0.25 0.75 1 0.25 0.25 0.25 0.25 0.25 0.75 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.5 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.75 0.5 0.25 0.25 0.25 0.75 0.25 0.25 0.5 0.25 0.75 3 ...
        0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25  0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.25 0.5 0.25 0.75 1 0.25 0.25 0.25 0.25 0.25 0.75 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.5 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.75 0.5 0.25 0.25 0.25 0.75 0.25 0.25 0.5 0.25 0.75 3 ...
        0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25  0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.25 0.5 0.25 0.75 1 0.25 0.25 0.25 0.25 0.25 0.75 0.5 0.5 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.5 ...
        0.5 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.25 0.25 0.75 0.5 0.25 0.25 0.25 0.75 0.25 0.25 0.5 0.25 0.75 3 0.25 0.75 ...
        0.5 0.25 0.25 0.25 0.5 0.25 0.25 0.5 0.25 0.5 0.5 4];      %演奏的内容，节奏
    l=0.6; L=L*l;
elseif strcmp(music_name, '乐器声复现')
    M = [do lai mi fa so la xi 2*do];
    L = [1 1 1 1 1 1 1 1];
    l = 1.5; L = L*l;
else
    errordlg('未找到歌曲文件！');
end




end


% %判断声音大小，防止声音过大
% if volume>2
%     y = 2*s0;
% else
%     y = volume*s0;
% end

%sound(s0(1:10000),fs);  %播放
%t_all = 0:1/fs:(length(s0)-1)/fs;
%plot(t_all(1:10000),s0(1:10000));
%set(gca,'ylim',[-3,3]);

%升调降调通过改变采样即可,但是同时会改变速度
%up_tone = resample(s0,1,2);
%sound(up_tone,fs);
%down_tone = resample(s0,2,1);
%sound(down_tone,fs);
